# 4. 변수
## 1. 변수란 무엇인가? 왜 필요한가?
- 애플리케이션은 데이터를 다룬다. 결국 애플리케이션의 목적은 데이터를 입력 받아 처리하고 그 결과를 반환하는 것이다. 변수는 데이터를 관리기 위한 핵심 개념.
- CPU가 + 연산을 수행하기 위해서는 먼저 + 연산자의 좌변과 우변의 숫자 값, 즉 피연산자(operand)를 기억해야 한다. 컴퓨터는 메모리를 사용해 데이터를 기억한다.

### 메모리
    - 메모리는 데이터를 저장할 수 있는 메모리 셀(memory cell)들의 집합체
    - 셀 하나의 크기는 1byte(8bit)
    - 컴퓨터는 셀의 크기, 즉 1byte 단위로 데이터를 저장(write)하거나 읽어(read)들임
    - 컴퓨터는 모든 데이터를 2진수로 처리
    - 메모리에 저장되는 데이터는 데이터의 종류(숫자, 텍스트, 이미지, 동영상 등)와 상관없이 2진수
    - 각각의 셀은 고유의 주소(address)를 가짐 (이 주소는 메모리 공간의 위치를 나타내며 0부터 시작하여 메모리의 크기만큼 정수로 표현)

- 간단한 연산 후 연산 결과가 메모리에 저장된다고해도 CPU가 연산하여 만들어낸 숫자 값을 재사용 할 수 없다면 의미가 없다. 연산 결과를 재사용하기 위해서 메모리에 직접적으로 접근하는 것은 매우 위험하며 시스템에 치명적인 오류를 야기할 수 있다. (자바스크립트가 개발자의 직접적인 메로리 제어를 허용하지 않는 이유)

### 변수
- 기억하고 싶은 메모리를 저장하고 이를 재사용하기 위해서 프로그래밍 언어는 변수를 제공
    - 변수(Variable)는 하나의 값을 저장할 수 있는 메모리 공간에 붙인 이름 또는 메모리 공간 자체 (값을 저장하고 참조하는 매커니즘으로 값에 이름을 붙인 것)
    - 변수를 통해 개발자는 메모리 주소를 직접 다루지 않아도 값을 저장하거나 참조할 수 있고 값을 변경할 수도 있다.

- 변수(Variable)에서 알아야 할 것들
    - 변수명 : 변수에 저장된 값의 의미를 파악할 수 있는 이름
    - 할당(assignment 대입, 저장) : 변수에 값을 저장하는 것
    - 참조(reference): 변수에 저장된 값을 읽어들이는 것

- 변수명을 통해 컴퓨터에게 참조를 요청하면 컴퓨터는 변수명과 매핑된 메모리 주소를 통해 메모리 공간에 접근, 저장된 값을 반환함.

### 식별자(identifier)
- 변수명을 식별자라고도 함
- 어떤 값을 구별하여 식별해낼 수 있는 고유한 이름
- 식별자라는 용어는 변수에만 국한해서 사용하지 않음.
- 변수, 함수, 클래스 등의 이름은 값을 구별할 수 있는 이름이므로 모두 식별자
- 따라서 식별자는 변수명보다는 상위 개념

## 2. 변수 선언
- 변수 선언(Variable declaration)이란 변수명(식별자)을 등록하여 자바스크립트 엔진에 변수의 존재를 알려 관리하도록 하는 것. (변수의 사용에는 반드시 선언이 필요)
    - var, let, const 키워드를 사용

- ES6에서 let, const 키워드가 도입되기 이전까지 var 키워드는 자바스크립트에서 변수를 선언할 수 있는 유일한 방법이었다.

### ES5 vs. ES6
- var 키워드의 단점
    - 블록 레벨 스코프(Block-level scope)를 지원하지 않음
- 이 단점을 보완하기 위해 ES6에서 let과 const 키워드를 도입
- var 키워드가 폐지(deprecated)된 것은 아님.
- ES6는 기본적으로 하위 호환성을 유지하면서 ES5의 기반 위에 새로운 기능을 추가한 것. (ES5 이하의 사양을 잘 살펴볼 필요가 있음)

### var
- var 키워드는 뒤에 오는 변수명을 새로운 변수를 선언할 것을 지시하는 키워드
    - 키워드(keyword)
        - 키워드는 자바스크립트 코드를 실행하는 자바스크립트 엔진이 수행할 동작을 규정한 일종의 명령어이다. 자바스크립트 엔진은 키워드를 만나면 자신이 수행해야 할 약속된 동작을 수행.
        - var 키워드가 실행되면 자바스크립트 엔진은 새로운 변수를 선언
- var 키워드로 확보된 메모리 공간은 비어있지 않다. 자바스크립트 엔진에 의해 undefined라는 값이 암묵적으로 할당되어 초기화된다. (자바스크립트의 특징)
    - undefined는 자바스크립트가 제공하는 원시 타입의 값(Primitive value).

- 선언 단계(Declaration phase): 변수명을 등록하여 자바스크립트 엔진에 변수의 존재를 알림.
    - 변수명 등록
        - 변수명을 비롯한 모든 식별자는 실행 컨텍스트(Execution context)의 렉시컬 환경(Lexical Environment)에 등록
        - 실행 컨텍스트는 실행 가능한 코드를 평가, 실행하기 위해 필요한 환경을 제공하고 코드의 실행 결과를 실제로 관리하는 영역.
        - 자바스크립트 엔진은 실행 컨텍스트를 통해 식별자와 스코프를 관리
- 초기화 단계(Initialization phase): 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 undefined를 할당

- var 키워드를 사용한 변수 선언은 선언 단계와 초기화 단계가 동시에 진행 
    - var 변수명; 을 통해서 변수명을 등록하고, 초기화 단계를 통해 변수에 암묵적으로 undefiend를 할당하여 초기화

- 일반적으로 초기화(Initialization)란 변수가 선언된 이후 최초로 값을 할당하는 것. 자바스크립트는 undefined로 암묵적인 초기화가 자동 수행된다. 변수를 선언하고 어떠한 값도 할당하지 않아도 변수는 undefined라는 값을 갖는다.
- 만약 초기화 단계를 거치지 않으면 확보된 메모리 공간에 이전에 달느 애플리케이션이 사용했던 값이 남아있을 수 있음. 이런 값을 쓰레기 값(Garbage value)이라고 함. 메모리 공간을 확보한 다음 값을 할당하지 않은 상태에서 곧바로 변수값을 참조하면 쓰레기 값이 나올 수 있음.

- 변수를 사용하려면 반드시 선언이 필요. 변수 뿐만이 아니라 모든 식별자(함수, 클래스 등)가 그렇다. 만약 선언 없이 식별자에 접근하면 ReferenceError가 발생. ReferenceError는 식별자를 통해 값을 참조하려 했지만 자바스크립트 엔진이 등록된 식별자를 찾을 수 없을 때 발생하는 참조 에러

## 3. 변수 선언의 실행 시점과 변수 호이스팅
- 변수 선언문보다 변수를 참조하는 코드가 앞에 있어도 변수를 참조하는 코드가 작동한다. 이는 변수 선언이 소스 코드가 순차적으로 한줄씩 실행되는 런타임(run-time) 시점이 아닌 그 이전의 파싱 타임(parsing-time)에 먼저 실행되기 때문이다.
- 자바스크립트는 한줄씩 순차적으로 실행하기 이전에 먼저 소스 코드 전체를 평가한다. 이 때 모든 선언문(변수 선언문, 함수 선언문 등)을 찾아내어 식별자를 등록하고 초기화함. 그후, 선언문을 제외한 소스 코드를 한줄씩 순차적으로 실행

### 자바스크립트는 인터프리터 언어인가 컴파일러 언어인가?
- 대부분의 모던 브라우저에서 사용되는 인터프리터는 전통적인 컴파일러 언어처럼 명시적인 컴파일 단계를 거치지는 않음. 하지만 꽤 복잡한 과정을 거치며 일부 소스 코드를 컴파일하고 실행한다. 이를 통해 인터프리터 언어의 장점인 동적 기능 지원을 살리면서 실행 속도가 느리다는 단점을 극복. 현재는 컴파일러와 인터프리터의 기술적 구분이 점차 모호해져 가는 추세.
- 자바스크립트는 런타임에 컴파일되며 실행 파일이 생성되지 않고 인터프리터의 도움없이 실행할 수 없기 때문에 컴파일러 언어라고 할 수 없음.

### AST
- 인터프리터 언어이든 컴파일러 언어이든 소스 코드는 단순히 문자열로 구성되어 있다. 따라서 이 두 방식 모두 문자열인 소스 코드를 해석하여 문법적 의미와 구조를 갖는 자료 구조인 AST(Abstract Syntax Tree, 추상적 구문 트리)를 생성한다. 인터프리터 또는 컴파일러는 AST를 사용하여 바이트 코드 또는 머신 코드를 생성하여 실행

### 변수 호이스팅(Variable Hoisting)
- 변수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징
- 호이스팅은 변수 선언 뿐만이 아니라 var, let, const, function, function*, class 키워드를 사용한 모든 선언문에 적용된다. 이들 키워드를 사용한 모든 선언문은 런타임이 아닌 파싱 타임에 먼저 실행되기 때문

## 4. 값의 할당
- 변수에 값을 할당(assignment 대입, 저장) 할 때는 할당 연산자(=)를 사용. 할당 연산자는 우변의 값을 좌변의 변수에 할당.
- 변수 선언과 값의 할당을 하나의 문(Statement)으로 단축 표현할 수도 있다.
- 자바스크립트 엔진은 변수 선언과 값의 할당을 구분하여 실행. 하지만 변수 선언은 다른 코드가 실행되기 이전, 즉 파싱 타임에 먼저 실행되지만 값의 할당은 코드가 순차적으로 실행되는 시점이 런타임에 실행
- 변수에 값을 할당하는 시점에는 이미 변수 선언이 완료된 상태이므로 변수는 undefined로 초기화 됨. 따라서 변수에 값을 할당하면 변수의 값은 undefined에서 새롭게 할당된 숫자 값으로 변경(재할당)된다.
- 변수에 값을 할당할 때는 이전 값 undefined가 저장되어 있던 메모리 공간을 지우고 그 메모리 공간에 할당 값을 새롭게 저장하는 것이 아니라 새로운 메모리 공간을 확보하고 그 메모리 공간에 할당 값을 저장하는 것에 주의!!!!!!!

## 5. 값의 재할당
- var 키워드로 선언한 변수는 값을 재할당 할 수 있다. 재할당은 현재 변수가 저장되고 있는 값을 버리고 새로운 값을 저장하는 것.
- 엄밀히 말하면 var 키워드로 선언한 변수는 선언과 동시에 undefined로 초기화되므로 변수에 처음으로 값을 할당하는 것도 재할당에 속한다.
- 재할당은 변수에 저장된 값을 다른 값으로 변경. 따라서 변수라 부른다. 만약 재할당을 할 수 없어서 변수에 저장된 값을 변경할 수 없다면 변수가 아니라 상수(Constant)라 부른다. 상수는 한 번 정해지면 변하지 않는 값. 다시 말해 상수는 단 한번만 할당할 수 있는 변수
- 변수의 이전 값인 undefined는 새롭게 재할당된 변수로 인해 더이상 필요가 없어졌으므로 가비지 컬렉터(Garbage Collector)에 의해 메모리에서 자동 해제. 단 메모리에서 언제 해제될 지는 예측할 수 없음.

### const 키워드
- ES6에서 도입된 const 키워드로 선언한 변수는 재할당이 금지됨.
- const 키워드를 사용하면 상수를 표현할 수 있다. 하지만 const는 반드시 상수만을 위해서 사용되지 않음.

### 언메니지드 언어와 매니지드 언어
- 프로그래밍 언어는 메모리 관리 방ㅅ긱에 의해 언매니지드 언어(Unmanaged Language)와 매니지드 언어(Managed Language)로 분류할 수 있음
- C 언어와 같은 언매니지드 언어는 개발자가 명시적으로 메모리를 할당하고 해제하기 위해 malloc()과 free()와 같은 저수준(low-level)메모리 관리 기능을 제공. 개발자의 역량에 의해 최적의 퍼포먼스를 확보할 수도, 반대로 치명적 오류를 야기할 수도 있다.
- 자바스크립트와 같은 매니지드 언어는 메모리의 할당 및 해제를 위한 메모리 관리 기능을 언어 차원에 담당. 개발자의 직접적인 메모리 제어를 허용하지 않음. 개발자가 명시적으로 메로리를 할당하고 해제할 수 없음. 사용하지 않는 메모리의 해제는 가비지 컬렉터(Garbage Collecotr)가 수행하며 이 또한 개발자가 관여 할 수 없다. 매니지드 언어는 개발자의 역량에 의존하는 부분이 상대적으로 작아져 어느 정도 일정한 생산성을 확볼할 수 있는 장점, but 퍼포먼스 면에서의 손실은 있음
- 매니지드 언어를 사용한다고 하더라도 매모리 관리에 대한 기본적인 내용을 이해해야 한다.

## 7. 값의 교환
## 8. 식별자 네이밍 규칙
- 식별자(identifier)는 어떤 데이터를 식별해낼 수 있는 고유한 이름. 식별자는 아래와 같은 네이밍 규칙을 준수해야 함.
    - 식별자는 특수문자를 제외한 문자, 숫자, underscore(_), 달러 기호($)로 시작해야 한다. 숫자로 시작하는 것은 허용하지 않는다.
    - 예약어는 식별자로 사용할 수 없다.
        - 식별자로 사용 가능하나 Strict Mode에서는 사용 불가
- 변수명도 식별자이므로 위 네이밍 규칙을 따라야 한다. 예를 들어 아래와 같은 식별자를 변수명으로 사용할 수 있다. 참고로 변수는 쉼표(,)로 구분해 하나의 문에서 여러 개를 한 번에 선언할 수 있음. 하지만 가독성이 나빠짐.(권장하지 않음)
- ES5부터 식별자를 만들 때 유니코드 문자를 허용하므로 알파벳 이외의 한글이나 일본어 식별자도 사용할 수 있음.
- 알파벳 이외의 유니코드 문자로 명명된 식별자를 사용하는 것은 바람직하지 않으므로 권장하지 않는다. 아래의 식별자는 명명 규칙에 위배되므로 변수명을 사용할 수 없음.
    - var first-name;
    - var 1st;
    - var this;
- 자바스크립트는 대소문자를 구별한다.
- 변수명은 변수의 존재 목적을 쉽게 이해할 수 있도록 의미를 명확히 표현해야 한다. 좋은 변수명은 코드의 가독성을 높인다
- 하나 이상의 영어 단어로 구성된 식별자를 네이밍할 때 단어를 한눈에 구분하기 위해 자주 사용되는 네이밍 컨벤션은 4가지가 있다.
    - 카멜 케이스 : var firstName;
    - 스네이크 케이스 : var first_name;
    - 파스칼 케이스 : var FirstName;
    - 헝가리언 케이스 : var strFirstName; (type + identifier), var $elem = $('.myClass'); (jQuery)
- 일관성을 유지한다면 어떤 네이밍 컨벤션을 사용하여도 좋음. 가장 일반적인 것은 변수와 함수의 이름에는 카멜 케이스를 사용하고 생성자 함수, 클래스의 이름에는 파스칼 케이스를 사용하는 것.
- 자바스크립트가 내장하고 있는 빌트인 객체와 함수들도 위 네이밍 컨벤션을 사용하고 있음. 따라서 코드 전체의 가독성을 높이려면 위 네이밍 컨벤션을 따르는 것이 유리.